<!DOCTYPE html>
  <!-- Coding by CodingLab | www.codinglabweb.com -->
<html lang="en">
<head>
    <title>Tra Top</title>
    <link rel="icon"  type = "image/jpg" href="images/fertil.png" />


	<meta charset="utf-8">
    <!--meta http-equiv="X-UA-Compatible" content="IE=edge"-->
  	<meta name="description" content="Leaflet Coord Projection">
  	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	 <!--LEAFLET-->
     <link rel="stylesheet" href="leaflet.css">
     <link href="https://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" rel="stylesheet"/>
     <link rel="stylesheet" href="//unpkg.com/leaflet@1.8.0/dist/leaflet.css" />
      <!--coordonn√©es /-->
      <link rel="stylesheet" href="https://edihasaj.github.io/leaflet-coord-projection/coord-projection.css"/>
     <!--localisation /-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.78.0/dist/L.Control.Locate.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <!--Itin√©raire /-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
    <!--search bar /-->
     <link rel="stylesheet" href="//unpkg.com/@sjaakp/leaflet-search/dist/leaflet-search.css" />
     <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
     <!----======== CSS ======== -->
    <link rel="stylesheet" href="css.css">
    
    <!----===== Boxicons CSS ===== -->
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
    <style>

		.leaflet-container {
			height: 400px;
			width: 600px;
			max-width: 100%;
			max-height: 100%;
		}

      .leaflet-popup {
    background-color: #fff; /* couleur de fond de la popup */
    color: #3feff5; /* couleur du texte de la popup */
    font-size: 10px; /* taille de police de la popup */
    border: 2px solid black;
}
	</style>
    </head>
    <!----===== CONTENU DU SIDEBAR ===== -->
    <body onload="hideLoader()">
        <div id="loader"></div>
        <nav class="sidebar close">
            <header>
                <div class="image-text">
                    <span class="image">
                        <img src="images/logo.svg" alt="">
                    </span>
    
                    <div class="text logo-text">
                        <span class="name">Recenssement</span>
                        <span class="profession">Haut Founty</span>
                    </div>
                </div>
    
                <i class='bx bx-chevron-right toggle'></i>
            </header>
    
            <div class="menu-bar">
                <div class="menu">
    
                    <ul class="menu-links">
                        <li class="nav-link">
                            <button href="#" onclick="refresh()" value="Rafraichir">
                                <i class='bx bx-refresh bx-spin bx-rotate-90 icon' ></i>
                                <span class="text navtext">RECHARGER LA PAGE</span>
                            </button>
                        </li>
                        <li class="nav-link">
                            <button onclick="redirectToDashb()">
                                <i class='bx bxs-dashboard bx-flashing icon' ></i>
                                <span class="text navtext">Dashboard</span>
                              </button>
                              
                        </li>
                        
    
                        <li class="nav-link">
                            <button href="Excel.rar" download onclick="downloadFile('Excel.rar')">
                                <i class='bx bxs-download bx-flashing icon'></i>
                                <span class="text nav-text">T√©l√©charger Excel</span>
                            </button>
                            
                        </li>
                        
    
                        <!--<li class="nav-link">
                            <button href="#"onclick='hideDiv("Divfer");hide_other_divs("Divfer");'>
                                <i class='bx bxs-leaf bx-flashing icon' ></i>
                                <span class="text nav-text">Fertilit√© du sol</span>
                            </button>
                        </li>
                        <div id="Divfer" class="DIV" style="display: none;">
                            <hr>
                            <p>Les cartes choropl√®tes des donn√©es de fertilit√© du sol.</p>
                            <h4>Choisissez la carte de la donn√©e que vous voulez: </h4>
                            <button id="btnfour" onclick="showphos();"><b>Afficher la carte du phosphore assimilable</b></button>
                            <button id="btnfour" onclick="showpot();"><b>Afficher la carte du de potassium √©changeable</b></button>
                            <button id="btnfour" onclick="showMO();"><b>Afficher la carte de la mati√®re organique</b></button>
                            <button id="btnfour" onclick="showpH();"><b>Afficher la carte de la valeur du pH</b></button>
                        </div>
    
                        <li class="nav-link">
                            <button onclick='hideDiv("DivITE");hide_other_divs("DivITE");'>
                                <i class='bx bx-trip bx-flashing icon' ></i>
                                <span class="text nav-text">Itin√©raire</span>
                            </button>
                        </li>
                        <div id="DivITE" class="DIV" style="display: none;">
                            <hr>
                            <button id="btnfour" onclick="showitineraire();"><b>CLIQUER POUR ACTIVER LA FONCTION D'ITINERAIRE</b></button>
                            <p><b>Cliquer sur le point d√©sir√©, pour voir son itin√©raire</b></p>
                        </div>
                        <li class="nav-link">
                            <button href="#"onclick='hideDiv("DivRas");hide_other_divs("DivRas");'>
                                <i class='bx bxs-file bx-flashing icon' ></i>
                                <span class="text nav-text">Rasters</span>
                            </button>
                        </li>
                        <div id="DivRas" class="DIV" style="display: none;">
                            <hr>
                            <button id="btnfour" onclick="showRaster();"><b>CLIQUER POUR AFFICHER LE RASTER DU RENDEMENT DU BLE</b></button>
                        </div>
                        <li class="nav-link">
                            <button onclick='hideDiv("Divble");hide_other_divs("Divble");'>
                                <i class='bx bx-spa bx-flashing icon' ></i>
                                <span class="text nav-text">Rendement du bl√©</span>
                            </button>
                        </li>
                        <div id="Divble" class="DIV" style="display: none;">
                            <hr>
                            <p>Carte √† symboles proportionnels qui illustre le rendement du bl√© dans les communes du province de Moulay yacoub</p>
                            <button id="btnfour" onclick="showble();"><b>Afficher la carte √† symbole proportionelle du rendement du bl√©.</b></button>
                            
                        </div>-->
    
                    </ul>
                </div>
    
                <div class="bottom-content">
                    <li class="">
                        <button onclick='reset_all()'>
                            <i class='bx bx-reset bx-spin bx-flip-horizontal icon' ></i>
                            <span class="text nav-text">Actualiser la map</span>
                        </button>
                    </li>
    
                    <li class="mode">
                        <div class="sun-moon">
                            <i class='bx bx-moon icon moon'></i>
                            <i class='bx bx-sun icon sun'></i>
                        </div>
                        <span class="mode-text text">Dark mode</span>
    
                        <div class="toggle-switch">
                            <span class="switch"></span>
                        </div>
                    </li>
                    
                </div>
            </div>
    
        </nav>
    
        <section class="home">
            <!--<div class="text"><b>üå±GEOPORTAIL AGRICOLE</b></div>-->
            <div id="map" style="width: 182vh; height: 108vh; margin: 0px; margin-left: 100px;"></div>
            
        </section>
        <!-- leaflet-->
    <script type="text/javascript" src="leaflet.js"></script>
    <script src="https://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <script src="//unpkg.com/leaflet@1.8.0/dist/leaflet.js"></script>
     <!-- script sidebar-->
     <script type="text/javascript" src="script.js"></script>
     <!-- area-->
     <script src="https://cdnjs.cloudflare.com/ajax/libs/Turf.js/2.0.2/turf.min.js"></script>
     
    <!--coordonn√©es /-->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.6.0/proj4.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/proj4leaflet/1.0.2/proj4leaflet.min.js"></script>
	<script type="text/javascript" src="https://edihasaj.github.io/leaflet-coord-projection/coord-projection.js"></script>
    <!--localisation /-->
    <script src="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.78.0/dist/L.Control.Locate.min.js" charset="utf-8"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
   <!--Itin√©raire /-->
   <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
   <!--search bar /-->
   <script src="//unpkg.com/@sjaakp/leaflet-search/dist/leaflet-search.js"></script>
   <!-- fichiers GeoJson-->
   <script type="text/javascript" src="Geojson/Recensement HF.geojson"></script>

   
<!-- contenu du geoportail-->
<script>
  
    //Definition des icons

var blackIcon = L.icon({
    iconUrl:'images/marker.svg' ,
    iconSize:     [32, 37], // size of the icon
    iconAnchor:   [16, 37], // point of the icon which will correspond to marker's location
    popupAnchor:  [0, -30] // point from which the popup should open relative to the iconAnchor
});

var redIcon = L.icon({
    iconUrl:'images/marker_red.svg' ,
    iconSize:     [32, 37], // size of the icon
    iconAnchor:   [16, 37], // point of the icon which will correspond to marker's location
    popupAnchor:  [0, -30] // point from which the popup should open relative to the iconAnchor
});





/// Basemaps variables
var satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
    maxZoom: 20,
    attribution: '<div class="attribution">Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community</div>'
});
var osm = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
    maxZoom: 20,
    attribution: '<div class="attribution"> cartocdn </div>'
});
//Google Map layer
googleStreets = L.tileLayer('http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}',{
    maxZoom: 20,
    subdomains:['mt0','mt1','mt2','mt3']
});

var baseMaps = {
    'satellite': satellite,
    'Map 2D': osm,
    'googleStreets': googleStreets,
    
};


            
///// initialisation de la variable map

var map = L.map('map', {
    center: [30.397896608428038, -9.577668715682591],
    zoom: 16,
    layers: osm
});


var layerControl = L.control.layers(baseMaps).addTo(map);



//Add GeoJSON
function handleclick(i){
    alert(i)
}

geojsonLayer = L.geoJSON(RecensementHF, {
    pointToLayer: function(feature, latlng) {
        return new L.Marker(latlng, {
            icon: MyIcon
        });
    },
    onEachFeature: function (feature, tilelayer) {
        tilelayer.bindPopup(
            '<a>Code: ' + feature.properties.Code + '</a>' +
            '<img src="' + feature.properties.Photo + '" alt="" width="270" height="180"/>' +
            '<a>Adresse: ' + feature.properties.Adrss_bien + '</a>' +
            '<a>Titre foncier: ' + feature.properties.Titre_Fonc + '</a>' +
            '<a>Superficie : ' + feature.properties.Superficie + 'm¬≤</a>' +
            '<a>Quote Part: ' + feature.properties.Quote_Part + '</a>' +
            '<a>Consistance: ' + feature.properties.Consistanc + '</a>' +
            '<a>Activit√©: ' + feature.properties.Activit√© + '</a>' +
            '<a>Propri√©taire: ' + feature.properties.Propri√©ta + '</a>' +
            '<a>Observation: ' + feature.properties.Observatio + '</a>' +
            '<a>Consistance: ' + feature.properties.Consistanc + '</a>' +
            '<button><a href="' + feature.properties.Lien + '">Visite Virtuelle</a></button>' +
            '<button><a href="' + feature.properties.Excel + '" download>T√©l√©charger</a></button>'
        );
    },
});
map.addLayer(geojsonLayer);

///coordinates
L.control.coordProjection({
            crs: 'EPSG4326'
        }).addTo(map);

///localisation
//L.control.locate().addTo(map);
//SEARCH
L.Control.geocoder().addTo(map);
    
var baseMaps = {
    "<span style='color: gray'>Grayscale</span>": grayscale ,
};
</script>

</body>
</html>